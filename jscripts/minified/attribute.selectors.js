function updateAttributeUrls(e, t, n, r) { var i = ""; var s = ""; var o = ""; var u = ""; var a = ""; var f = ""; var l = ""; if (e != null) { i = "-" + e; s = "-" + t; o = "_" + r; f = getQueryString()["dfp"] } else { var c = location.pathname.slice(1); var h = c; activeBaseAspx = h; f = h.split("."); f = f[0]; l = f.split("-"); l = l[0] } var p = ""; var d = ""; var v = ""; var m = ""; $(".attributes a").each(function () { var e = $(this).attr("href"); var t = $(this).attr("id"); var r = t.split("#"); if (r[0] != "parent" && r[0] != "selected") { v = t.split("::"); p = v[1]; d = v[2]; m = e.split("-"); var a = $(".attributes a").index(this); if (n != null) { u = "-" + n } var c = e; if (l == "p") { f = getDefaultPageIfProduct(e) } c += "&aid=" + m[1] + i; c += "&gid=" + p + s; c += "&guid=" + d + o; c += "&el=" + a + u; c += "&dfp=" + f; $(this).attr("href", c); $(this).addClass("attribute-a-" + a) } else { var a = $(".attributes a").index(this); $(this).addClass("attribute-a-" + a) } }) } function getDefaultPageIfProduct(e) { var t = ""; var n = e.split("?"); n = n[1]; n = n.split("&"); var r = n[1]; r = r.split("="); r = r[1]; var i = n[2]; i = i.split("="); i = i[1]; if (r == "Category") { r = "c" } else { r = "d" } t = r + "-" + i; return t } function removeThisSelection(e, t) { var n = getQueryString()["aid"]; var r = getQueryString()["gid"]; var i = getQueryString()["guid"]; var s = getQueryString()["el"]; var o = ""; var u = ""; var a = ""; var f = ""; if (s != null) { var l = n.split("-"); var c = r.split("-"); var h = i.split("_"); var p = s.split("-"); var d = []; var v = []; var m = []; var g = []; if (l.length > 1) { var y = []; $(".selected-attributes").each(function () { var e = $(this).attr("id"); e = e.split("::"); var t = e[1]; if (t != undefined) { y.push(t) } }); var b = []; for (indx = 0; indx < y.length; ++indx) { var w = l.indexOf(y[indx]); if (y.length > w) { b.push(w) } } for (indx = 0; indx < b.length; ++indx) { d.push(l[parseInt(b[indx])]); v.push(c[parseInt(b[indx])]); m.push(h[parseInt(b[indx])]); g.push(p[parseInt(b[indx])]) } } for (var E = 0; E < d.length; E++) { if (t != E) { o += d[E] + "-"; u += g[E] + "-"; a += v[E] + "-"; f += m[E] + "_" } } } var S = ""; if (t == 0 && d.length > 1) { S = $(".selected-1").attr("id"); S = S.split("::"); S = S[1] + "-" + S[2] } if (t > 0 && t <= d.length) { S = $(".selected-0").attr("id"); S = S.split("::"); S = S[1] + "-" + S[2]; } var x = location.pathname; x = x.split("/"); var T = getQueryString()["dfp"]; var N = "?EntityID=" + getQueryString()["EntityID"] + "&EntityName=" + getQueryString()["EntityName"]; N += "&aid=" + o.substr(0, o.length - 1); N += "&gid=" + a.substr(0, a.length - 1); N += "&guid=" + f.substr(0, f.length - 1); N += "&el=" + u.substr(0, u.length - 1); N += "&dfp=" + T; var C = "/a-" + S + ".aspx" + N; if (S != "" && x.length == 2) { C = "/a-" + S + ".aspx" + N } if (S == "" && d.length == 0 && x.length > 1) { var k = T.split("/"); var L = k[k.length - 1]; C = "/" + L + ".aspx" } if (t == 0 && d.length == 1 && x.length > 1) { C = x[1] + "/" + T + ".aspx" } if (S == "" && x.length == 2) { C = T + ".aspx" } if (x[1] != null && x.length > 2) { var k = T.split("/"); var L = k[k.length - 1]; window.location = "/" + T.replace("/" + L, C) } else { window.location = C } } function getQueryString() { var e = [], t; var n = window.location.href.slice(window.location.href.indexOf("?") + 1).split("&"); for (var r = 0; r < n.length; r++) { t = n[r].split("="); e.push(t[0]); e[t[0]] = t[1] } return e } $("document").ready(function () { var e = getQueryString()["el"]; var t = getQueryString()["aid"]; var n = getQueryString()["gid"]; var r = getQueryString()["guid"]; var i = getQueryString()["dfp"]; var s = window.location.pathname.split("/"); updateAttributeUrls(t, n, e, r); if (t != null) { var o = 0; var u = $(".selected-attributes").size(); $(".selected-attributes").each(function () { var e = $(this).attr("id"); e = e.split("::"); var t = e[1]; $(this).addClass("selected-" + o); $(this).attr("onclick", "removeThisSelection(" + t + ", " + o + ")"); o++ }); if (o == u && u > 1) { $("#remove-all").attr("href", i + ".aspx") } else { $("#remove-all").css("display", "none") } } else { $("#selections").css("display", "none") } var a = $(".attributes a").size(); if (a == 0) { $("#attributes-listing").css("display", "none") } })