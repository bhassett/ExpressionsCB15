(function (c) {
    function D(a) { g = a } var b, g = {}, q = { accountOrderHistoryLinkId: "accountOrderHistoryLink", orderHistoryContentId: "orderHistoryContent", orderHistoryDisplayRangeId: "orderHistoryDisplayRange", orderHistoryLinkId: "lnkOrderHistory", orderHistoryPagerId: "pager", orderHistoryPlaceHolderId: "pnlOrderHistory", pagingHeaderId: "pagingHeader", resetLinkId: "reset", orderHistoryCssPath: "components/order-history/css/index.css", stringResourceKeys: "" }, r = 0, s = "", t = "", k = "", u = "", v = "", w = "", x = "", l = "", y = "", m = "", z = "", A = "",
    n = "", B = "", p = "", C = "", E = c.prototype.init; c.prototype.init = function (a, b) { var c = E.apply(this, arguments); a && a.selector && (c.context = a.context, c.selector = a.selector); "string" == typeof a && (c.context = b || document, c.selector = a); return c }; c.prototype.init.prototype = c.prototype; c.fn.OrderHistory = {
        setup: function (a) {
            D(c.extend(q, a)); b = this; b.downloadCss(g.orderHistoryCssPath, function () { }); a = function () { b.setStringResourcesValue(g.stringResourceKeys); b.setAppConfigsValue(); b.attachEventsListener() }; b.downloadAppConfigs(b.getRequiredAppConfigKeys(),
            a); b.downloadStringResources(b.convertObjectToArray(g.stringResourceKeys), a)
        }, getRequiredAppConfigKeys: function () { var a = []; a.push("ShowCustomerServiceNotesInReceipts"); a.push("OrderHistoryDefaultPageCount"); return a }, setStringResourcesValue: function (a) {
            s = b.getString(a.displayText); t = b.getString(a.ofText); k = b.getString(a.onText); u = b.getString(a.orderDate); v = b.getString(a.orderNotes); w = b.getString(a.orderNumber); x = b.getString(a.orderTotal); l = b.getString(a.paymentMethod); y = b.getString(a.paymentStatus);
            m = b.getString(a.reorder); z = b.getString(a.reorderPrompt); A = b.getString(a.resetText); n = b.getString(a.shippedText); B = b.getString(a.shippingStatus); p = b.getString(a.trackingNumber); C = b.getString(a.viewing)
        }, setAppConfigsValue: function () { b.toBoolean(ise.Configuration.getConfigValue("ShowCustomerServiceNotesInReceipts")); r = ise.Configuration.getConfigValue("OrderHistoryDefaultPageCount") }, renderOrderHistoryHeader: function () {
            var a = {}; a.orderNumber = w; a.orderDate = u; a.paymentStatus = y; a.shippingStatus = B; a.orderTotal =
            x; a.orderNotes = v; var c = {}; c.stringResource = a; a = b.parseJqueryTemplate("orderHistoryTemplate", c); b.setElementHTMLContent(q.orderHistoryPlaceHolderId, a)
        }, attachEventsListener: function () { c(this.selectorChecker(g.orderHistoryLinkId)).unbind("click").click(function () { b.renderOrderHistoryHeader(); b.renderOrderHistoryContent(r, 1) }) }, renderOrderHistoryContent: function (a, h) {
            var f = function (d) {
                d = d.d; var e = {}; e.salesOrder = d.orders; var h = {}; h.reorderCaption = m; h.paymentMethodCaption = l; h.shippedCaption = n; h.onCaption =
                k; h.trackingNumberCaption = p; e.stringResource = h; reOrderString = null; e = b.parseJqueryTemplate("orderHistoryContentTemplate", e); b.setElementHTMLContent(g.orderHistoryContentId, c(e).html()); b.hideAccountOrderHistoryLink(); b.displayOrderHistoryRange(d.rows, d.start, d.end, d.current); b.displayOrderHistoryPager(d.rows, d.pages, d.current, a); c(b.selectorChecker(g.resetLinkId)).unbind("click").click(function () { var a = c(b.selectorChecker("txtPages")).val(); b.getWebOrder(a, 1, f) }); c(b.selectorChecker(".lnkReOrder")).unbind("click").click(function () { b.displayPrompt(this) })
            };
            b.getWebOrder(a, 1, f)
        }, displayPrompt: function (a) { if (confirm(z)) { var b = c(a).attr("data-orderNumber"); c(a).attr("href", "reorder.aspx?so=" + b) } }, displayOrderHistoryRange: function (a, c, f, d) { var e = {}; e.rows = a; e.start = c; e.end = f; e.current = d; a = {}; a.viewing = C; a.ofText = t; e.stringResource = a; e = b.parseJqueryTemplate("orderHistoryRangeTemplate", e); b.setElementHTMLContent(g.orderHistoryDisplayRangeId, e) }, displayOrderHistoryPager: function (a, h, f) {
            var d = {}; d.count = h; var e = {}; e.display = s; e.reset = A; d.stringResource = e; e =
            null; d = b.parseJqueryTemplate("orderHistoryPager", d); b.setElementHTMLContent(g.orderHistoryPagerId, d); b.pagination(a, h, f); c(b.selectorChecker(".order-history-page-number")).unbind("click").click(function () {
                var a = c(this).attr("data-pagenumber"), d = c(this).attr("data-allPages"); b.getWebOrder(d, a, function (a) {
                    a = a.d; var d = {}; d.salesOrder = a.orders; var e = {}; e.reorderCaption = m; e.paymentMethodCaption = l; e.shippedCaption = n; e.onCaption = k; e.trackingNumberCaption = p; d.stringResource = e; reOrderString = null; d = b.parseJqueryTemplate("orderHistoryContentTemplate",
                    d); b.setElementHTMLContent(g.orderHistoryContentId, c(d).html()); b.displayOrderHistoryRange(a.rows, a.start, a.end, a.current)
                })
            })
        }, pagination: function (a, c, f) { f = Math.ceil(a / c); a < c && (f = 1); a = []; for (var d = {}, e = 1; e <= f; e++) { var k = {}; k.current = e; a.push(k) } d.paging = a; d.allPages = c; c = b.parseJqueryTemplate("orderHistoryPaginationTemplate", d); b.setElementHTMLContent(g.pagingHeaderId, c) }, getWebOrder: function (a, c, f) {
            b.ajaxRequest("ActionService.asmx/GetOrderHistory", { pages: a, current: c }, function (a) {
                a.d ? "undefined" !=
                typeof f && f(a) : console.log(a.d)
            }, function (a) { console.log(a.d) })
        }, hideAccountOrderHistoryLink: function () { c(this.selectorChecker(g.accountOrderHistoryLinkId)).hide() }
    }; c.extend(c.fn.OrderHistory, new jqueryBasePlugin)
})(jQuery);