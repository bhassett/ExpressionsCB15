(function (e) {
    function n(a) { g = a } var b, g = {}, l = { accountOpenInvoicesLinkId: "accountOpenInvoicesLink", openInvoicesContentId: "openInvoicesContent", openInvoicesDisplayRangeId: "openInvoicesDisplayRange", openInvoicesLinkId: "lnkOpenInvoices", openInvoicesPagerId: "invoice-pager", openInvoicesPlaceHolderId: "pnlOpenInvoices", pagingHeaderId: "pagingHeader", resetLinkId: "reset-invoice-listing", openInvoicesCssPath: "components/open-invoices/css/index.css", stringResourceKeys: "" }, m = 0, c = {
        DISPLAY_TEXT: "", OF_TEXT: "", ON_TEXT: "",
        RESET_TEXT: "", INVOICE_DATE: "", INVOICE_CODE: "", INVOICE_DUEDATE: "", INVOICE_DUETOTAL: "", INVOICE_PAYMENTS: "", INVOICE_BALANCE: "", ACTION_TEXT: "", PAY_ONLINE_BUTTON_TEXT: ""
    }, p = e.prototype.init; e.prototype.init = function (a, b) { var c = p.apply(this, arguments); a && a.selector && (c.context = a.context, c.selector = a.selector); "string" == typeof a && (c.context = b || document, c.selector = a); return c }; e.prototype.init.prototype = e.prototype; e.fn.OpenInvoices = {
        setup: function (a) {
            n(e.extend(l, a)); b = this; b.downloadCss(g.openInvoicesCssPath,
            function () { }); a = function () { b.setStringResourcesValue(g.stringResourceKeys); b.setAppConfigsValue(); b.attachEventsListener() }; b.downloadAppConfigs(b.getRequiredAppConfigKeys(), a); b.downloadStringResources(b.convertObjectToArray(g.stringResourceKeys), a)
        }, getRequiredAppConfigKeys: function () { var a = []; a.push("OpenInvoiceDefaultPageCount"); return a }, setStringResourcesValue: function (a) {
            c.DISPLAY_TEXT = b.getString(a.displayText); c.OF_TEXT = b.getString(a.ofText); c.ON_TEXT = b.getString(a.onText); c.RESET_TEXT = b.getString(a.resetText);
            c.INVOICE_DATE = b.getString(a.invoiceDate); c.INVOICE_CODE = b.getString(a.invoiceCode); c.INVOICE_DUEDATE = b.getString(a.invoiceDueDate); c.INVOICE_DUETOTAL = b.getString(a.invoiceDueTotal); c.INVOICE_PAYMENTS = b.getString(a.invoicePayments); c.INVOICE_BALANCE = b.getString(a.invoiceBalance); c.ACTION_TEXT = b.getString(a.actionText); c.PAY_ONLINE_BUTTON_TEXT = b.getString(a.payonlineButtonText)
        }, setAppConfigsValue: function () {
            var a = parseInt(ise.Configuration.getConfigValue("OpenInvoiceDefaultPageCount")); isNaN(a) &&
            (a = 10); m = a
        }, renderOpenInvoicesHeader: function () { var a = {}; a.invoiceDate = c.INVOICE_DATE; a.invoiceCode = c.INVOICE_CODE; a.invoiceDueDate = c.INVOICE_DUEDATE; a.invoiceDueTotal = c.INVOICE_DUETOTAL; a.invoicePayments = c.INVOICE_PAYMENTS; a.invoiceBalance = c.INVOICE_BALANCE; a.actionText = c.ACTION_TEXT; var e = {}; e.stringResource = a; a = b.parseJqueryTemplate("openInvoicesTemplate", e); b.setElementHTMLContent(l.openInvoicesPlaceHolderId, a) }, attachEventsListener: function () {
            e(b.selectorChecker(g.openInvoicesLinkId)).unbind("click").click(function () {
                b.renderOpenInvoicesContent(m,
                1)
            })
        }, renderOpenInvoicesContent: function (a, h) {
            var k = function (f) {
                var d = f.d, h = {}; h.invoice = d.invoice; f = {}; f.onCaption = c.ON_TEXT; f.payOnlineButtonText = c.PAY_ONLINE_BUTTON_TEXT; h.stringResource = f; reOrderString = null; b.hideAccountOpenInvoicesLink(function () {
                    b.renderOpenInvoicesHeader(); var c = b.parseJqueryTemplate("openInvoicesContentTemplate", h); b.setElementHTMLContent(g.openInvoicesContentId, e(c).html()); b.displayOpenInvoicesRange(d.rows, d.start, d.end, d.current); b.displayOpenInvoicesPager(d.rows, d.pages,
                    d.current, a); e(b.selectorChecker(g.resetLinkId)).unbind("click").click(function () { var a = e(b.selectorChecker("txtOpenInvoicesPages")).val(); b.getOpenInvoices(a, 1, k) }); e(b.selectorChecker(".lnkReOrder")).unbind("click").click(function () { b.displayPrompt(this) })
                })
            }; b.getOpenInvoices(a, 1, k)
        }, displayPrompt: function (a) { if (confirm(c.REORDER_PROMPT)) { var b = e(a).attr("data-orderNumber"); e(a).attr("href", "reorder.aspx?so=" + b) } }, displayOpenInvoicesRange: function (a, e, k, f) {
            var d = {}; d.rows = a; d.start = e; d.end = k; d.current =
            f; a = {}; a.viewing = c.VIEWING; a.ofText = c.OF_TEXT; d.stringResource = a; d = b.parseJqueryTemplate("openInvoicesRangeTemplate", d); b.setElementHTMLContent(g.openInvoicesDisplayRangeId, d)
        }, displayOpenInvoicesPager: function (a, h, k) {
            var f = {}; f.count = h; var d = {}; d.display = c.DISPLAY_TEXT; d.reset = c.RESET_TEXT; f.stringResource = d; d = null; f = b.parseJqueryTemplate("openInvoicesPager", f); b.setElementHTMLContent(g.openInvoicesPagerId, f); b.pagination(a, h, k); e(b.selectorChecker(".open-invoice-page-number")).unbind("click").click(function () {
                var a =
                e(this).attr("data-pagenumber"), d = e(this).attr("data-allPages"); b.getOpenInvoices(d, a, function (a) { a = a.d; var d = {}; d.invoice = a.invoice; var f = {}; f.onCaption = c.ON_TEXT; f.payOnlineButtonText = c.PAY_ONLINE_BUTTON_TEXT; d.stringResource = f; reOrderString = null; d = b.parseJqueryTemplate("openInvoicesContentTemplate", d); b.setElementHTMLContent(g.openInvoicesContentId, e(d).html()); b.displayOpenInvoicesRange(a.rows, a.start, a.end, a.current) })
            })
        }, pagination: function (a, c, e) {
            e = Math.ceil(a / c); a < c && (e = 1); a = []; for (var f =
            {}, d = 1; d <= e; d++) { var l = {}; l.current = d; a.push(l) } f.paging = a; f.allPages = c; c = b.parseJqueryTemplate("openInvoicesPaginationTemplate", f); b.setElementHTMLContent(g.pagingHeaderId, c)
        }, getOpenInvoices: function (a, c, e) { b.ajaxSecureRequest("GetCustomerOpenInvoices", { pages: a, current: c }, function (a) { a.d ? "undefined" != typeof e && e(a) : console.log(a.d) }, function (a) { console.log(a.d) }) }, hideAccountOpenInvoicesLink: function (a) { e(this.selectorChecker(g.accountOpenInvoicesLinkId)).fadeOut("slow", function () { a() }) }
    }; e.extend(e.fn.OpenInvoices,
    new jqueryBasePlugin)
})(jQuery);